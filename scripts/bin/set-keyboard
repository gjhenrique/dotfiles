#! /bin/bash

#045e:0745 Microsoft Keyboard (Home)
#1a2c:0c21 Teclado de Londrina
declare -a devices=("045e:0745" "1a2c:0c21")

ACTIVATE_ALTWIN=0

for i in ${!devices[@]};
do
    if (( $(lsusb | grep ${devices[$i]} | wc -l) >= 1)); then
        (( ACTIVATE_ALTWIN++ ))
    fi
done

# Notebook from work.
# Complete keyboard
if [ $(hostname) = 'pc_locaweb' ];
then
    ACTIVATE_ALTWIN=1
fi

if (( $ACTIVATE_ALTWIN >= 1 )); then
    setxkbmap -option 'compose:menu,caps:swapescape,altwin:left_meta_win,altwin:meta_alt'
else
    setxkbmap -option 'compose:menu,caps:swapescape,altwin:left_meta_win'
fi

setxkbmap -option 'terminate:ctrl_alt_bksp'

(sleep 1 && setxkbmap br)
